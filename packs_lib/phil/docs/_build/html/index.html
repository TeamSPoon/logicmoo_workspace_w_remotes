
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>phil on SWISH Manual - SWI-Prolog Version &#8212; phil 1.0.0 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">phil 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="phil-on-swish-manual-swi-prolog-version">
<h1>phil on SWISH Manual - SWI-Prolog Version<a class="headerlink" href="#phil-on-swish-manual-swi-prolog-version" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>phil is a suite of programs for reasoning with hierarchical probabilistic logic programs (HPLP) <a class="reference internal" href="#ngulamrig17-plp-iw" id="id1">[NguembangFadjaLR17]</a>.
It allows both inference and learning. phil is available only for SWI-Prolog.</p>
<p>phil is part of cplint on SWISH web application available at <a class="reference external" href="http://cplint.eu">http://cplint.eu</a>.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>phil is distributed as a <a class="reference external" href="http://www.swi-prolog.org/pack/list?p=phil">pack</a> of <a class="reference external" href="http://www.swi-prolog.org/">SWI-Prolog</a>.
To install it, use</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ swipl
?- pack_install(phil).
</pre></div>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<p>It requires the packs</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="https://github.com/friguzzi/auc">auc</a></li>
<li><a class="reference external" href="https://github.com/friguzzi/matrix">matrix</a></li>
</ul>
</div></blockquote>
<p>They are installed automatically when installing pack <cite>phil</cite> or can be installed manually as follows</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ swipl
?- pack_install(auc).
?- pack_install(matrix).
</pre></div>
</div>
<p>You can upgrade the pack with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ swipl
?- pack_upgrade(phil).
</pre></div>
</div>
<p>Note that the packs on which <cite>phil</cite> depends are not upgraded automatically. In this case, they need to be upgraded manually.</p>
</div>
<div class="section" id="example-of-use">
<h3>Example of use<a class="headerlink" href="#example-of-use" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd &lt;pack&gt;/phil/prolog/examples
$ swipl
?- [uwcse].
?- inference_hplp(advisedby(harry,ben),ai,Prob).
</pre></div>
</div>
</div>
<div class="section" id="testing-the-installation">
<h3>Testing the installation<a class="headerlink" href="#testing-the-installation" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ swipl
?- [library(phil_test/test)].
?- test.
</pre></div>
</div>
</div>
<div class="section" id="datasets">
<h3>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h3>
<p>Other machine learning datasets are available in pack <a class="reference external" href="https://github.com/ArnaudFadja/phil_datasets">phil_datasets</a>.</p>
</div>
</div>
<div class="section" id="syntax">
<h2>Syntax<a class="headerlink" href="#syntax" title="Permalink to this headline">¶</a></h2>
<p>phil allows the definition of discrete probability distributions. It performs inference, parameter and structure learning on Hierarchical Probabilistic Logic Programs (HPLPs) <a class="reference internal" href="#ngulamrig17-plp-iw" id="id2">[NguembangFadjaLR17]</a>.</p>
<p>HPLPs are restrictions of Logic programs with annotated disjunctions LPADs (<a class="reference internal" href="#venver03-tr" id="id3">[VV03]</a><a class="reference internal" href="#venver04-iclp04-ic" id="id4">[VVB04]</a>). A HPLP is a set of annotated clauses whose head contain a single atom annotated with a probability. For the rest, the usual syntax of Prolog is used.
A general HPLP clause has the following form:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">h</span><span class="p">:</span><span class="n">p</span><span class="p">:</span><span class="o">-</span> <span class="n">BodyInput</span><span class="p">,</span> <span class="n">b1</span><span class="p">,</span><span class="n">b2</span><span class="o">...</span><span class="p">,</span><span class="n">bn</span><span class="o">.</span>
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">BodyInput</span></code> is a conjunction of predicates called input predicates, that are defined by certain facts and rules, and the <code class="code docutils literal"><span class="pre">bi</span></code> are predicates non explicitly defined in the data called hidden predicates. Each hidden predicate is described by a set of clauses in a level immediately bellow. e.g <code class="code docutils literal"><span class="pre">b1</span></code> can be described as follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">b1</span><span class="p">:</span><span class="n">p1_1</span><span class="p">:</span><span class="o">-</span> <span class="n">BodyInput1</span><span class="p">,</span> <span class="n">b1_11</span><span class="p">,</span><span class="n">b1_12</span><span class="o">...</span><span class="p">,</span><span class="n">b1_1m</span><span class="o">.</span>
<span class="n">b1</span><span class="p">:</span><span class="n">p1_2</span><span class="p">:</span><span class="o">-</span> <span class="n">BodyInput2</span><span class="p">,</span> <span class="n">b1_21</span><span class="p">,</span><span class="n">b1_22</span><span class="o">...</span><span class="p">,</span><span class="n">b1_2m</span><span class="o">.</span>
<span class="o">...</span>

<span class="n">b1</span><span class="p">:</span><span class="n">p1_k</span><span class="p">:</span><span class="o">-</span> <span class="n">BodyInputk</span><span class="p">,</span> <span class="n">b1_k1</span><span class="p">,</span><span class="n">b1_k2</span><span class="o">...</span><span class="p">,</span><span class="n">b1_km</span><span class="o">.</span>
</pre></div>
</div>
<p>Each <code class="code docutils literal"><span class="pre">b1_ij</span></code> is also described by a set clauses in the layer immediately bellow. This creates an hierarchy among predicates and clauses. Programs having this structure are called hierarchical probabilistic logic programs. The predicate in the head of clauses in the first layer is called <code class="code docutils literal"><span class="pre">target</span></code> or <code class="code docutils literal"><span class="pre">output</span></code> predicate which is the predicate we are interested in predicting.
The <code class="code docutils literal"><span class="pre">p1_i</span></code> are numeric expressions representing probabilities.
It is up to the user to ensure that their are legal, i.e. they are greater than zero and less than one. The first clause above states that if the conjunction of the input and the hidden predicates in the body is true, then the head is true is true with probability <code class="code docutils literal"><span class="pre">p</span></code> otherwise, the head is false with probability <code class="code docutils literal"><span class="pre">1-p</span></code>.  Note that, hidden predicates in the body of clauses in the programs are all different.
If the clause has an empty body, it can be represented like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">h</span><span class="p">:</span><span class="n">p</span><span class="o">.</span>
</pre></div>
</div>
<p>If the clause is annotated with probability 1, the annotation can be omitted and the clause takes
the form of a normal prolog clause, i.e.:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">h</span> <span class="p">:</span><span class="o">-</span> <span class="n">Body</span><span class="o">.</span>
</pre></div>
</div>
<p>stands for:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">h</span><span class="p">:</span><span class="mi">1</span> <span class="p">:</span><span class="o">-</span> <span class="n">Body</span><span class="o">.</span>
</pre></div>
</div>
<p>The following example inspired from the UWCSE dataset used in <a class="reference internal" href="#kok2005learning" id="id5">[KD05]</a> is represented as (file <a class="reference external" href="http://cplint.eu/e/phil/uwcse.pl">uwcse.pl</a>)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">advisedby</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span><span class="mf">0.3</span> <span class="p">:</span><span class="o">-</span><span class="n">student</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="n">professor</span><span class="p">(</span><span class="n">B</span><span class="p">),</span><span class="n">project</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">project</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">hid_1</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">)</span><span class="o">.</span>
<span class="n">advisedby</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span><span class="mf">0.6</span> <span class="p">:</span><span class="o">-</span><span class="n">student</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="n">professor</span><span class="p">(</span><span class="n">B</span><span class="p">),</span><span class="n">ta</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">A</span><span class="p">),</span><span class="n">taughtby</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">.</span>
<span class="n">hid_1</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">):</span> <span class="mf">0.2</span> <span class="p">:</span><span class="o">-</span> <span class="n">publication</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">publication</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">)</span><span class="o">.</span>

<span class="n">student</span><span class="p">(</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span> <span class="n">professor</span><span class="p">(</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span>
<span class="n">project</span><span class="p">(</span><span class="n">harry</span><span class="p">,</span><span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">project</span><span class="p">(</span><span class="n">harry</span><span class="p">,</span><span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">project</span><span class="p">(</span><span class="n">ben</span><span class="p">,</span><span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">project</span><span class="p">(</span><span class="n">ben</span><span class="p">,</span><span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">taughtby</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span> <span class="n">taughtby</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span>
<span class="n">ta</span><span class="p">(</span><span class="n">c_1</span><span class="p">,</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span> <span class="n">ta</span><span class="p">(</span><span class="n">c_2</span><span class="p">,</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p4</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p4</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>where publication(A,B,C) means that A is a publication with author B produced in project C. advisedby/2 is the target predicate, student/1, professor/1, project/2, ta/2, taughtby/2 and publication/3 are input predicates and hid_1/3 is a hidden predicate.</p>
<p>The first clause states that a student A is advised by a professor B with probability 0.3 if they both work on the same project C and the predicate hid_1(A,B,C) is true.
The second states that a student A is advised by a professor B with probability 0.6 if the student is a teacher assistant in a course taught by the professor.
The third clause is a hidden clause which acts as an aggregation of publications coauthored by the student and his/her professor from a certain project.</p>
<p>The facts in the program state that harry is a student and ben a professor. They have two joint courses c1 and c2, two joint projects pr1 and pr2, two joint publications p1 and p2 from project pr1 and two joint publications p3 and p4 from project pr2.</p>
</div>
<div class="section" id="semantics">
<h2>Semantics<a class="headerlink" href="#semantics" title="Permalink to this headline">¶</a></h2>
<p>The semantics of HPLPs directly inherits the semantics of LPADs. In the case of programs without function symbols, the semantics of HPLPs is given as follows: an HPLP defines a probability distribution over normal logic programs called <em>worlds</em>.
A world is obtained from the HPLP by first grounding it, and by including in the world or no each ground clause (without the probability annotation).
The probability of a world is the product of the probabilities associated to the heads of each selected ground clause.
The probability of a ground atom (the query) is given by the sum of the probabilities of the worlds where the query is true.</p>
<p>If the HPLP contains function symbols, the definition is more complex, see <a class="reference internal" href="#dblp-journals-ai-poole97" id="id6">[Poo97]</a><a class="reference internal" href="#dblp-journals-jair-satok01" id="id7">[SK01]</a>.</p>
</div>
<div class="section" id="inference">
<h2>Inference<a class="headerlink" href="#inference" title="Permalink to this headline">¶</a></h2>
<p>phil answers queries using the module phil. It performs exact inference using a program transformation technique.  Each program is converted to a set of arithmetic circuits (ACs) or deep neural networks using a modified version of PITA <a class="reference internal" href="#rig14-cj-ij" id="id8">[Rig14]</a> with tabling and answer subsumption <a class="reference internal" href="#rigswi10-iclp10-ic" id="id9">[RS10]</a> as described in <a class="reference internal" href="#ngulamrig17-plp-iw" id="id10">[NguembangFadjaLR17]</a>.</p>
<p>For answering queries, you have to prepare a Prolog file where you first load the inference module <code class="code docutils literal"><span class="pre">phil</span></code>, initialize it with the directive <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">phil</span></code> and then enclose the hierarchical program clauses in <code class="code docutils literal"><span class="pre">:-begin_in.</span></code> and <code class="code docutils literal"><span class="pre">:-end_in.</span></code> or enclose the clauses in <code class="code docutils literal"><span class="pre">in([&lt;clauses&gt;])</span></code>.
For example, the uwcse program above can be stored in <a class="reference external" href="http://cplint.eu/e/phil/uwcse.pl">uwcse.pl</a> for performing inference with <code class="code docutils literal"><span class="pre">phil</span></code> as follows</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">use_module</span><span class="p">(</span><span class="n">library</span><span class="p">(</span><span class="n">phil</span><span class="p">))</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">phil</span><span class="o">.</span>

<span class="p">:</span><span class="o">-</span> <span class="n">begin_in</span><span class="o">.</span>
<span class="n">advisedby</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span><span class="mf">0.3</span> <span class="p">:</span><span class="o">-</span><span class="n">student</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="n">professor</span><span class="p">(</span><span class="n">B</span><span class="p">),</span><span class="n">project</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">project</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">hid_1</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">)</span><span class="o">.</span>
<span class="n">advisedby</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">):</span><span class="mf">0.6</span> <span class="p">:</span><span class="o">-</span><span class="n">student</span><span class="p">(</span><span class="n">A</span><span class="p">),</span><span class="n">professor</span><span class="p">(</span><span class="n">B</span><span class="p">),</span><span class="n">ta</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">A</span><span class="p">),</span><span class="n">taught</span>\<span class="n">_by</span><span class="p">(</span><span class="n">C</span><span class="p">,</span><span class="n">B</span><span class="p">)</span><span class="o">.</span>
<span class="n">hid_1</span><span class="p">(</span><span class="n">A</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">):</span> <span class="mf">0.2</span> <span class="p">:</span><span class="o">-</span> <span class="n">publication</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">A</span><span class="p">,</span><span class="n">C</span><span class="p">),</span><span class="n">publication</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">end_in</span><span class="o">.</span>

<span class="n">begin</span><span class="p">(</span><span class="n">model</span><span class="p">(</span><span class="n">ai</span><span class="p">))</span><span class="o">.</span>
<span class="n">student</span><span class="p">(</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span> <span class="n">professor</span><span class="p">(</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span>
<span class="n">project</span><span class="p">(</span><span class="n">harry</span><span class="p">,</span><span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">project</span><span class="p">(</span><span class="n">harry</span><span class="p">,</span><span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">project</span><span class="p">(</span><span class="n">ben</span><span class="p">,</span><span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">project</span><span class="p">(</span><span class="n">ben</span><span class="p">,</span><span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">taughtby</span><span class="p">(</span><span class="n">c1</span><span class="p">,</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span> <span class="n">taughtby</span><span class="p">(</span><span class="n">c2</span><span class="p">,</span><span class="n">ben</span><span class="p">)</span><span class="o">.</span>
<span class="n">ta</span><span class="p">(</span><span class="n">c_1</span><span class="p">,</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span> <span class="n">ta</span><span class="p">(</span><span class="n">c_2</span><span class="p">,</span><span class="n">harry</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p4</span><span class="p">,</span> <span class="n">harry</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p2</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr1</span><span class="p">)</span><span class="o">.</span>
<span class="n">publication</span><span class="p">(</span><span class="n">p3</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span> <span class="n">publication</span><span class="p">(</span><span class="n">p4</span><span class="p">,</span> <span class="n">ben</span><span class="p">,</span> <span class="n">pr2</span><span class="p">)</span><span class="o">.</span>
<span class="n">end</span><span class="p">(</span><span class="n">model</span><span class="p">(</span><span class="n">ai</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>You can also have (non-probabilistic) clauses outside <code class="code docutils literal"><span class="pre">:-begin/end_in.</span></code> which can be enclosed in <code class="code docutils literal"><span class="pre">bg(&lt;list</span> <span class="pre">of</span> <span class="pre">terms</span> <span class="pre">representing</span> <span class="pre">clauses&gt;).</span></code>
These are considered as database clauses.</p>
<p>To run a query, you can simply load the Prolog file, for example <a class="reference external" href="http://cplint.eu/e/phil/uwcse.pl">uwcse.pl</a>, as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- [uwcse].
</pre></div>
</div>
<p>or:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ swipl uwcse.pl
</pre></div>
</div>
<p>and run the query:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- inference_hplp(advisedby(harry,ben),ai,Prob).
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">advisedby(harry,ben)</span></code> is the atom for the target predicate, <code class="code docutils literal"><span class="pre">ai</span></code> the interpretation or the model where the query is run and <code class="code docutils literal"><span class="pre">Prob</span></code> stores the computed probability. For also generating the arithmetic circuit, run the query:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- inference_hplp(advisedby(harry,ben),ai,Prob,Circuit).
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">Circuit</span></code> stores the arithmetic circuit as a Prolog term.</p>
</div>
<div class="section" id="learning">
<h2>Learning<a class="headerlink" href="#learning" title="Permalink to this headline">¶</a></h2>
<p>The following learning algorithms are available:</p>
<ul>
<li><p class="first">PHIL for Parameter learning for HIerarchical probabilistic Logic programs. Given an input HPLP, PHIL learns its parameters from data. Two versions of PHIL are implemented:</p>
<blockquote>
<div><ul class="simple">
<li>DPHIL (Deep PHIL) <a class="reference internal" href="#nguriglam18-plp-iw" id="id11">[NFRL18b]</a> performs gradient descent over the ACs. Two regularizations of DPHIL are implemented: L1 and L2 regularizations as used in the deep learning community.</li>
<li>EMPHIL (Expectation Maximization PHIL) <a class="reference internal" href="#fadja2018expectation" id="id12">[NFRL18a]</a> performs EM. Three regularizations of EMPHIL are implemented: besides the previous two regularizations, a regularization based on Bayesian update of the parameters is also implemented.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">SLEAHP for Structure LEArning of Hierarchical Probabilistic logic programming, learns both the structure and the parameters of HPLPs from data. SLEAHP performs structure learning by parameter learning. From the data, a set of bottoms clauses are generated. Then a tree of literals appearing in the bottom clauses is created. A very large HPLP with initial parameters (randomly chosen) is randomly generated from the tree. Finally, a regularized version of PHIL is performed on the initial HPLP and clauses with very small values of probability are dropped.</p>
</li>
</ul>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<p>To execute the learning algorithms, prepare a Prolog file divided in five parts</p>
<ul class="simple">
<li>preamble</li>
<li>background knowledge, i.e., knowledge valid for all interpretations</li>
<li>hierarchical program for which you want to learn the parameters (optional for SLEAHP)</li>
<li>language bias information</li>
<li>example interpretations</li>
</ul>
<p>The preamble must come first, the order of the other parts can be changed.</p>
<p>For example, consider the Bongard problems of <a class="reference internal" href="#raelae95-alt95" id="id13">[DRVL95]</a>. <a class="reference external" href="http://cplint.eu/e/phil/bongard.pl">bongard.pl</a> and <a class="reference external" href="http://cplint.eu/e/phil/bongardkeys.pl">bongardkeys.pl</a> represent a Bongard problem for SLEAHP.</p>
<div class="section" id="preamble">
<h4>Preamble<a class="headerlink" href="#preamble" title="Permalink to this headline">¶</a></h4>
<p>In the preamble, the PHIL library is loaded with (<a class="reference external" href="http://cplint.eu/e/phil/bongard.pl">bongard.pl</a>):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">use_module</span><span class="p">(</span><span class="n">library</span><span class="p">(</span><span class="n">phil</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>Now you can initialize  with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">phil</span><span class="o">.</span>
</pre></div>
</div>
<p>At this point you can start setting parameters for SLEAHP such as for example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">set_hplp</span><span class="p">(</span><span class="n">megaex_bottom</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">set_hplp</span><span class="p">(</span><span class="n">rate</span><span class="p">,</span><span class="mf">0.95</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">set_hplp</span><span class="p">(</span><span class="n">max_layer</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">set_hplp</span><span class="p">(</span><span class="n">min_probability</span><span class="p">,</span><span class="mf">0.00001</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">set_sc</span><span class="p">(</span><span class="n">verbosity</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>We will later see the list of available parameters.</p>
</div>
<div class="section" id="background-and-initial-hierarchical-program">
<h4>Background and Initial hierarchical program<a class="headerlink" href="#background-and-initial-hierarchical-program" title="Permalink to this headline">¶</a></h4>
<p>Now you can specify the background knowledge with a fact of the form</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">bg</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">list</span> <span class="n">of</span> <span class="n">terms</span> <span class="n">representing</span> <span class="n">clauses</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>where the clauses must be deterministic.
Alternatively, you can specify a set of clauses by including them in a section between <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">begin_bg.</span></code> and <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">end_bg.</span></code>
Moreover, you can specify an initial program with a fact of the form</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ow">in</span><span class="p">(</span><span class="o">&lt;</span><span class="nb">list</span> <span class="n">of</span> <span class="n">terms</span> <span class="n">representing</span> <span class="n">clauses</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>The initial program is used in parameter learning for providing the structure.
Remember to enclose each clause in parentheses because <code class="code docutils literal"><span class="pre">:-</span></code> has the highest precedence.</p>
<p>For example, <a class="reference external" href="http://cplint.eu/e/bongard.pl">bongard.pl</a> has the initial program</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="ow">in</span><span class="p">([(</span><span class="n">pos</span><span class="p">:</span><span class="mf">0.197575</span> <span class="p">:</span><span class="o">-</span>
   <span class="n">circle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
   <span class="ow">in</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">A</span><span class="p">)),</span>
<span class="p">(</span><span class="n">pos</span><span class="p">:</span><span class="mf">0.000303421</span> <span class="p">:</span><span class="o">-</span>
   <span class="n">circle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
   <span class="n">triangle</span><span class="p">(</span><span class="n">B</span><span class="p">)),</span>
<span class="p">(</span><span class="n">pos</span><span class="p">:</span><span class="mf">0.000448807</span> <span class="p">:</span><span class="o">-</span>
   <span class="n">triangle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
   <span class="n">circle</span><span class="p">(</span><span class="n">B</span><span class="p">))])</span><span class="o">.</span>
</pre></div>
</div>
<p>Alternatively, you can specify an input program in a section between <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">begin_in.</span></code> and <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">end_in.</span></code> as for example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">begin_in</span><span class="o">.</span>

<span class="n">pos</span><span class="p">:</span><span class="mf">0.197575</span> <span class="p">:</span><span class="o">-</span>
        <span class="n">circle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
        <span class="ow">in</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">A</span><span class="p">)</span><span class="o">.</span>
<span class="n">pos</span><span class="p">:</span><span class="mf">0.000303421</span> <span class="p">:</span><span class="o">-</span>
        <span class="n">circle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
        <span class="n">triangle</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">.</span>
<span class="n">pos</span><span class="p">:</span><span class="mf">0.000448807</span> <span class="p">:</span><span class="o">-</span>
        <span class="n">triangle</span><span class="p">(</span><span class="n">A</span><span class="p">),</span>
        <span class="n">circle</span><span class="p">(</span><span class="n">B</span><span class="p">)</span><span class="o">.</span>

<span class="p">:</span><span class="o">-</span> <span class="n">end_in</span><span class="o">.</span>
</pre></div>
</div>
<p>If you specify both a <code class="code docutils literal"><span class="pre">in/1</span></code> fact and a section, the clauses of the two will be combined.</p>
<p>The annotations of the head atoms of the initial program can be probabilities, as in the example above. In parameter learning, the learning procedure can start with the initial parameters in the program. In this case, it is up to the user to ensure that there are values between 0 and 1. In the case of structure learning, the initial program is not necessary.</p>
</div>
<div class="section" id="language-bias">
<h4>Language Bias<a class="headerlink" href="#language-bias" title="Permalink to this headline">¶</a></h4>
<p>The language bias part contains the declarations of the input and output predicates. Note that the hidden predicates are not declared since there are automatically generated.
The output predicate is declared as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">output</span><span class="p">(</span><span class="o">&lt;</span><span class="n">predicate</span><span class="o">&gt;/&lt;</span><span class="n">arity</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>and indicates the predicate whose atom you want to predict.
Derivations for the atoms for this predicate in the input data is built by the system.
Input predicates are those whose atoms you are not interested in predicting.
You can declare input predicates with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">input</span><span class="p">(</span><span class="o">&lt;</span><span class="n">predicate</span><span class="o">&gt;/&lt;</span><span class="n">arity</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>For these predicates, the only true atoms are those in the interpretations and those derivable from them using the background knowledge.</p>
<p>Then, for structure learning you have to specify the language bias by means of mode declarations in the style of <a class="reference external" href="https://www.doc.ic.ac.uk/~shm/progol.html">Progol</a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">modeh</span><span class="p">(</span><span class="o">&lt;</span><span class="n">recall</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">predicate</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">...</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>specifies the atoms that can appear in the head of clauses. In hierarchical programs only the ouput and the hidden predicates can appear in the head of clauses.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">modeb</span><span class="p">(</span><span class="o">&lt;</span><span class="n">recall</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">predicate</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&lt;</span><span class="n">arg1</span><span class="o">&gt;</span><span class="p">,</span><span class="o">...</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>specifies the atoms that can appear in the body of clauses. <code class="code docutils literal"><span class="pre">&lt;recall&gt;</span></code> can be an integer or <code class="code docutils literal"><span class="pre">*</span></code>. <code class="code docutils literal"><span class="pre">&lt;recall&gt;</span></code> indicates how many atoms for the predicate specification are retained in the bottom clause during a saturation step. <code class="code docutils literal"><span class="pre">*</span></code> stands for all those that are found.
Otherwise the indicated number of atoms are randomly chosen.</p>
<p>Arguments of the form</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+&lt;</span><span class="nb">type</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>specifies that the argument should be an input variable of type <code class="code docutils literal"><span class="pre">&lt;type&gt;</span></code>, i.e., a variable replacing a <code class="code docutils literal"><span class="pre">+&lt;type&gt;</span></code> argument in the head or a <code class="code docutils literal"><span class="pre">-&lt;type&gt;</span></code> argument in a preceding literal in the current hypothesized clause.</p>
<p>Another argument form is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-&lt;</span><span class="nb">type</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>for specifying that the argument should be a output variable of type <code class="code docutils literal"><span class="pre">&lt;type&gt;</span></code>.
Any variable can replace this argument, either input or output.
The only constraint on output variables is that those in the head of a clause must appear as output variables in an atom in the body.</p>
<p>Other forms are</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1">#&lt;type&gt;</span>
</pre></div>
</div>
<p>for specifying an argument which should be replaced by a constant of type <code class="code docutils literal"><span class="pre">&lt;type&gt;</span></code> in the bottom clause but should not be used for replacing input variables of the following literals when building the bottom clause or</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">-</span><span class="c1">#&lt;type&gt;</span>
</pre></div>
</div>
<p>for specifying an argument which should be replaced by a constant of type <code class="code docutils literal"><span class="pre">&lt;type&gt;</span></code> in the bottom clause and that should be used for replacing input variables of the following literals when building the bottom clause.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">constant</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>for specifying a constant.</p>
<p>An example of language bias for the Bongard domain is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">output</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span>

<span class="nb">input</span><span class="p">(</span><span class="n">triangle</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="nb">input</span><span class="p">(</span><span class="n">square</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="nb">input</span><span class="p">(</span><span class="n">circle</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="nb">input</span><span class="p">(</span><span class="ow">in</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="nb">input</span><span class="p">(</span><span class="n">config</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>

<span class="n">modeh</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">triangle</span><span class="p">(</span><span class="o">-</span><span class="n">obj</span><span class="p">))</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">square</span><span class="p">(</span><span class="o">-</span><span class="n">obj</span><span class="p">))</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">circle</span><span class="p">(</span><span class="o">-</span><span class="n">obj</span><span class="p">))</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="ow">in</span><span class="p">(</span><span class="o">+</span><span class="n">obj</span><span class="p">,</span><span class="o">-</span><span class="n">obj</span><span class="p">))</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="ow">in</span><span class="p">(</span><span class="o">-</span><span class="n">obj</span><span class="p">,</span><span class="o">+</span><span class="n">obj</span><span class="p">))</span><span class="o">.</span>
<span class="n">modeb</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="n">config</span><span class="p">(</span><span class="o">+</span><span class="n">obj</span><span class="p">,</span><span class="o">-</span><span class="c1">#dir)).</span>
</pre></div>
</div>
<p>SLEAHP also requires facts for the <code class="code docutils literal"><span class="pre">determination/2</span></code> Aleph-style predicate that indicate which predicates can appear in the body of clauses.
For example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">determination</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">triangle</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="n">determination</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">square</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="n">determination</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">circle</span><span class="o">/</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span>
<span class="n">determination</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="ow">in</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">determination</span><span class="p">(</span><span class="n">pos</span><span class="o">/</span><span class="mi">0</span><span class="p">,</span><span class="n">config</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>state that <code class="code docutils literal"><span class="pre">triangle/1</span></code> can appear in the body of clauses for <code class="code docutils literal"><span class="pre">pos/0</span></code>.</p>
</div>
<div class="section" id="example-interpretations">
<h4>Example Interpretations<a class="headerlink" href="#example-interpretations" title="Permalink to this headline">¶</a></h4>
<p>The last part of the file contains the data.
You can specify data with two modalities: models and keys.
In the models case, you specify an example model (or interpretation or mega-example) as a list of Prolog facts initiated by <code class="code docutils literal"><span class="pre">begin(model(&lt;name&gt;)).</span></code> and terminated by <code class="code docutils literal"><span class="pre">end(model(&lt;name&gt;)).</span></code> as in</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">begin</span><span class="p">(</span><span class="n">model</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span>
<span class="n">pos</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="n">o5</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="n">o5</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
<span class="n">square</span><span class="p">(</span><span class="n">o4</span><span class="p">)</span><span class="o">.</span>
<span class="ow">in</span><span class="p">(</span><span class="n">o4</span><span class="p">,</span><span class="n">o5</span><span class="p">)</span><span class="o">.</span>
<span class="n">circle</span><span class="p">(</span><span class="n">o3</span><span class="p">)</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="n">o2</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="n">o2</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
<span class="ow">in</span><span class="p">(</span><span class="n">o2</span><span class="p">,</span><span class="n">o3</span><span class="p">)</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="n">o1</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="n">o1</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
<span class="n">end</span><span class="p">(</span><span class="n">model</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>The facts in the interpretation are loaded in SWI-Prolog database by adding an extra initial argument equal to the name of the model.
After each interpretation is loaded, a fact of the form <code class="code docutils literal"><span class="pre">int(&lt;id&gt;)</span></code> is asserted, where <code class="code docutils literal"><span class="pre">id</span></code> is the name of the interpretation.
This can be used in order to retrieve the list of interpretations.</p>
<p>Alternatively, with the keys modality, you can directly write the facts and the first argument will be interpreted as a model identifier.
The above interpretation in the keys modality is</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pos</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o5</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o5</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
<span class="n">square</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o4</span><span class="p">)</span><span class="o">.</span>
<span class="ow">in</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o4</span><span class="p">,</span><span class="n">o5</span><span class="p">)</span><span class="o">.</span>
<span class="n">circle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o3</span><span class="p">)</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o2</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o2</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
<span class="ow">in</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o2</span><span class="p">,</span><span class="n">o3</span><span class="p">)</span><span class="o">.</span>
<span class="n">triangle</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o1</span><span class="p">)</span><span class="o">.</span>
<span class="n">config</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="n">o1</span><span class="p">,</span><span class="n">up</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>which is contained in the <a class="reference external" href="http://cplint.eu/e/phil/bongardkeys.pl">bongardkeys.pl</a>.
This is also how model <code class="code docutils literal"><span class="pre">2</span></code> above is stored in SWI-Prolog database.
The two modalities, models and keys, can be mixed in the same file.
Facts for <code class="code docutils literal"><span class="pre">int/1</span></code> are not asserted for interpretations in the key modality but can be added by the user explicitly.</p>
<p>Note that you can add background knowledge that is not probabilistic directly to the file writing clauses taking into account the model argument.
For example (<code class="code docutils literal"><span class="pre">carc.pl</span></code>), available in <a class="reference external" href="https://github.com/ArnaudFadja/phil_datasets">phil_datasets</a>, contains</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>connected(_M,Ring1,Ring2):-
        Ring1 \= Ring2,
        member(A,Ring1),
        member(A,Ring2), !.

symbond(Mod,A,B,T):- bond(Mod,A,B,T).
symbond(Mod,A,B,T):- bond(Mod,B,A,T).
</pre></div>
</div>
<p>where the first argument of all atoms is the model.</p>
<p>Then you must indicate how examples are divided in folds with facts of the form: <code class="code docutils literal"><span class="pre">fold(&lt;fold_name&gt;,&lt;list</span> <span class="pre">of</span> <span class="pre">model</span> <span class="pre">identifiers&gt;)</span></code>, as for example</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fold</span><span class="p">(</span><span class="n">train</span><span class="p">,[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="o">...</span><span class="p">])</span><span class="o">.</span>
<span class="n">fold</span><span class="p">(</span><span class="n">test</span><span class="p">,[</span><span class="mi">490</span><span class="p">,</span><span class="mi">491</span><span class="p">,</span><span class="o">...</span><span class="p">])</span><span class="o">.</span>
</pre></div>
</div>
<p>As the input file is a Prolog program, you can define intentionally the folds as in</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">fold</span><span class="p">(</span><span class="nb">all</span><span class="p">,</span><span class="n">F</span><span class="p">):</span><span class="o">-</span>
<span class="n">findall</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">I</span><span class="p">),</span><span class="n">F</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p><code class="code docutils literal"><span class="pre">fold/2</span></code> is dynamic so you can also write</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">fold</span><span class="p">(</span><span class="nb">all</span><span class="p">,</span><span class="n">F</span><span class="p">),</span>
<span class="n">sample_hplp</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="n">FTr</span><span class="p">,</span><span class="n">FTe</span><span class="p">),</span>
<span class="k">assert</span><span class="p">(</span><span class="n">fold</span><span class="p">(</span><span class="n">rand_train</span><span class="p">,</span><span class="n">FTr</span><span class="p">)),</span>
<span class="k">assert</span><span class="p">(</span><span class="n">fold</span><span class="p">(</span><span class="n">rand_test</span><span class="p">,</span><span class="n">FTe</span><span class="p">))</span><span class="o">.</span>
</pre></div>
</div>
<p>which however must be inserted after the input interpretations otherwise the facts for <code class="code docutils literal"><span class="pre">int/1</span></code> will not be available and the fold <code class="code docutils literal"><span class="pre">all</span></code> would be empty.
This command uses <code class="code docutils literal"><span class="pre">sample_hplp(N,List,Sampled,Rest)</span></code> exported from <code class="code docutils literal"><span class="pre">phil</span></code> that samples <code class="code docutils literal"><span class="pre">N</span></code> elements from <code class="code docutils literal"><span class="pre">List</span></code> and returns the sampled elements in <code class="code docutils literal"><span class="pre">Sampled</span></code> and the rest in <code class="code docutils literal"><span class="pre">Rest</span></code>.
If <code class="code docutils literal"><span class="pre">List</span></code> has <code class="code docutils literal"><span class="pre">N</span></code> elements or less, <code class="code docutils literal"><span class="pre">Sampled</span></code> is equal to <code class="code docutils literal"><span class="pre">List</span></code> and <code class="code docutils literal"><span class="pre">Rest</span></code> is empty.</p>
</div>
</div>
<div class="section" id="commands">
<h3>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h3>
<div class="section" id="parameter-learning">
<h4>Parameter Learning<a class="headerlink" href="#parameter-learning" title="Permalink to this headline">¶</a></h4>
<p>To execute PHIL, prepare an input file as indicated above and call</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- induce_hplp_par(+List_of_folds:list,-P:list).
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">&lt;list</span> <span class="pre">of</span> <span class="pre">folds&gt;</span></code> is a list of the folds for training and <code class="code docutils literal"><span class="pre">P</span></code> will contain the input program with updated parameters.</p>
<p>For example <a class="reference external" href="http://cplint.eu/e/phil/bongard.pl">bongard.pl</a>, you can perform parameter learning on the <code class="code docutils literal"><span class="pre">train</span></code> fold with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- induce_hplp_par([train],P).
</pre></div>
</div>
</div>
<div class="section" id="structure-learning">
<h4>Structure Learning<a class="headerlink" href="#structure-learning" title="Permalink to this headline">¶</a></h4>
<p>To execute SLEAHP, prepare an input file in the editor panel as indicated above and call</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- induce_hplp(+List_of_folds:list,-P:list).
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">List_of_folds</span></code> is a list of the folds for training and <code class="code docutils literal"><span class="pre">P</span></code> will contain the learned program.</p>
<p>For example <a class="reference external" href="http://cplint.eu/e/phil/bongard.pl">bongard.pl</a>, you can perform structure learning on the <code class="code docutils literal"><span class="pre">train</span></code> fold with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- induce_hplp([train],P).
</pre></div>
</div>
<p>A program can also be tested on a test set with <code class="code docutils literal"><span class="pre">test_hplp/7</span></code>  as described below.</p>
<p>Between two executions of <code class="code docutils literal"><span class="pre">induce_hplp/2</span></code> you should exit SWI-Prolog to have a clean database.</p>
</div>
<div class="section" id="testing">
<h4>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h4>
<p>A program can also be tested on a test set in SLEAHP with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">test_hplp</span><span class="p">(</span><span class="o">+</span><span class="n">Program</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="o">+</span><span class="n">List_of_folds</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="o">-</span><span class="n">LL</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="o">-</span><span class="n">AUCROC</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="o">-</span><span class="n">ROC</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="o">-</span><span class="n">AUCPR</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="o">-</span><span class="n">PR</span><span class="p">:</span><span class="nb">list</span><span class="p">)</span> <span class="ow">is</span> <span class="n">det</span>
</pre></div>
</div>
<p>where <code class="code docutils literal"><span class="pre">Program</span></code> is a list of terms representing clauses and <code class="code docutils literal"><span class="pre">List_of_folds</span></code> is a list of folds.</p>
<p><code class="code docutils literal"><span class="pre">test_hplp/7</span></code> returns the log likelihood of the test examples in <code class="code docutils literal"><span class="pre">LL</span></code>, the Area Under the ROC curve in <code class="code docutils literal"><span class="pre">AUCROC</span></code>, a dictionary containing the list of points (in the form of Prolog pairs <code class="code docutils literal"><span class="pre">x-y</span></code>) of the ROC curve in <code class="code docutils literal"><span class="pre">ROC</span></code>, the Area Under the PR curve in <code class="code docutils literal"><span class="pre">AUCPR</span></code>, a dictionary containing the list of points of the PR curve in <code class="code docutils literal"><span class="pre">PR</span></code>.</p>
<p>Then you can draw the curves in <code class="code docutils literal"><span class="pre">phil</span></code> using C3.js as follows</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">compute_areas_diagrams</span><span class="p">(</span><span class="o">+</span><span class="n">ExampleList</span><span class="p">:</span><span class="nb">list</span><span class="p">,</span><span class="o">-</span><span class="n">AUCROC</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="o">-</span><span class="n">ROC</span><span class="p">:</span><span class="nb">dict</span><span class="p">,</span><span class="o">-</span><span class="n">AUCPR</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span><span class="o">-</span><span class="n">PR</span><span class="p">:</span><span class="nb">dict</span><span class="p">)</span> <span class="ow">is</span> <span class="n">det</span>
</pre></div>
</div>
<p>(from pack <a class="reference external" href="http://www.swi-prolog.org/pack/list?p=auc">auc.pl</a>) that takes as input a list <code class="code docutils literal"><span class="pre">ExampleList</span></code> of pairs probability-literal.</p>
<p>For example, to test on fold <code class="code docutils literal"><span class="pre">test</span></code> the program learned on fold <code class="code docutils literal"><span class="pre">train</span></code> you can run the query</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- induce_hplp_par([train],P),
test_hplp(P,[test],LL,AUCROC,ROC,AUCPR,PR).
</pre></div>
</div>
<p>Or you can test the input program on the fold <code class="code docutils literal"><span class="pre">test</span></code> with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>?- in(P),test_hplp(P,[test],LL,AUCROC,ROC,AUCPR,PR).
</pre></div>
</div>
<p>In <code class="code docutils literal"><span class="pre">phil</span></code> on SWISH, by including</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">use_rendering</span><span class="p">(</span><span class="n">c3</span><span class="p">)</span><span class="o">.</span>
<span class="p">:</span><span class="o">-</span> <span class="n">use_rendering</span><span class="p">(</span><span class="n">lpad</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>in the code before <code class="code docutils literal"><span class="pre">:-</span> <span class="pre">phil.</span></code> the curves will be shown as graphs using C3.js and the output program will be pretty printed.</p>
</div>
</div>
<div class="section" id="hyper-parameters-for-learning">
<h3>Hyper-parameters for Learning<a class="headerlink" href="#hyper-parameters-for-learning" title="Permalink to this headline">¶</a></h3>
<p>Hyper-parameters are set with commands of the form</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="p">:</span><span class="o">-</span> <span class="n">set_hplp</span><span class="p">(</span><span class="o">&lt;</span><span class="n">parameter</span><span class="o">&gt;</span><span class="p">,</span><span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="p">)</span><span class="o">.</span>
</pre></div>
</div>
<p>They are available both for PHIL and SLEAHP:</p>
<ul>
<li><p class="first">PHIL hyper-parameters</p>
<blockquote>
<div><ul class="simple">
<li><code class="code docutils literal"><span class="pre">algorithmType</span></code> (values: <code class="code docutils literal"><span class="pre">{dphil,emphil}</span></code>, default value: <code class="code docutils literal"><span class="pre">dphil</span></code>): defines the parameter learning algorithm.</li>
<li><code class="code docutils literal"><span class="pre">maxIter_phil</span></code> (values: integer, default value: 1000): maximum number of iteration of PHIL. If set to -1, no maximum number of iterations is imposed.</li>
<li><code class="code docutils literal"><span class="pre">epsilon_deep</span></code> (values: real, default value: 0.0001): if the difference in the log likelihood in two successive PHIL (DPHIL and EMPHIL) iteration is smaller than <code class="code docutils literal"><span class="pre">epsilon_deep</span></code>, then PHIL stops.</li>
<li><code class="code docutils literal"><span class="pre">epsilon_deep_fraction</span></code> (values: real, default value: 0.00001): if the difference in the log likelihood in two successive PHIL iteration is smaller than <code class="code docutils literal"><span class="pre">epsilon_deep_fraction*(-current</span> <span class="pre">log</span> <span class="pre">likelihood)</span></code>, then PHIL stops.</li>
<li><code class="code docutils literal"><span class="pre">seed</span></code> (values: seed(integer) or seed(random), default value <code class="code docutils literal"><span class="pre">seed(3032)</span></code>): seed for the Prolog random functions, see <a class="reference external" href="http://www.swi-prolog.org/pldoc/man?predicate=set_random/1">SWI-Prolog manual</a> .</li>
<li><code class="code docutils literal"><span class="pre">setSeed</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code>, default value: <code class="code docutils literal"><span class="pre">no</span></code>): if <code class="code docutils literal"><span class="pre">yes</span></code>, the value of <code class="code docutils literal"><span class="pre">c_seed</span></code> is used as seed for randomly initializing the probabilities in PHIL  otherwise the actual clock value is used.</li>
<li><code class="code docutils literal"><span class="pre">c_seed</span></code> (values: unsigned integer, default value 21344)): seed for the C random functions if <code class="code docutils literal"><span class="pre">setSeed</span></code> is set to <code class="code docutils literal"><span class="pre">yes</span></code>.</li>
<li><code class="code docutils literal"><span class="pre">useInitParams</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code>, default value: <code class="code docutils literal"><span class="pre">no</span></code>): if <code class="code docutils literal"><span class="pre">yes</span></code> the initial parameters during the learning are the ones indicated in the program. Otherwise, the initial parameters are generated randomly using the clock seed.</li>
<li><code class="code docutils literal"><span class="pre">logzero</span></code> (values: negative real, default value <span class="math">\(\log(0.000001)\)</span>): value assigned to <span class="math">\(\log(0)\)</span>.</li>
<li><code class="code docutils literal"><span class="pre">zero</span></code> (values: real, default value <span class="math">\(0.000001\)</span>): value assigned to <span class="math">\(0\)</span>.</li>
<li><code class="code docutils literal"><span class="pre">max_initial_weight</span></code> (values: real number , default value: 0.5): weights in DPHIL are randomly initialized with values in the interval [-max_initial_weight, max_initial_weight].</li>
<li><code class="code docutils literal"><span class="pre">adam_params</span></code> (values: list of four values [learningRate, beta1, beta2, epsilon], default value: [0.001,0.9,0.999,1e-8]): provides Adam’s hyper-parameters.</li>
<li><code class="code docutils literal"><span class="pre">batch_strategy</span></code> (values: <code class="code docutils literal"><span class="pre">minibatch(size)</span></code>, <code class="code docutils literal"><span class="pre">stoch_minibatch(size)</span></code>, <code class="code docutils literal"><span class="pre">batch</span></code>, default value: <code class="code docutils literal"><span class="pre">minibatch(10)</span></code>): defines the gradient descent strategy in DPHIL. If set to <code class="code docutils literal"><span class="pre">minibatch(size)</span></code> the mini batch strategy with batch size <code class="code docutils literal"><span class="pre">size</span></code> is used i.e at each iteration, <code class="code docutils literal"><span class="pre">size</span></code> arithmetic circuits (ACs) are used to compute the gradients. If set to <code class="code docutils literal"><span class="pre">batch</span></code> the whole set of ACs are used to compute the gradients. <code class="code docutils literal"><span class="pre">stoch_minibatch(size)</span></code> is a modified version of mini batch in which at each iteration, <code class="code docutils literal"><span class="pre">size</span></code>  ACs are randomly selected for computing the gradients.</li>
<li><code class="code docutils literal"><span class="pre">saveStatistics</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code>, default value: <code class="code docutils literal"><span class="pre">no</span></code>): if <code class="code docutils literal"><span class="pre">yes</span></code>, the statistics (evolution of the likelihood and other values) during parameter learning are saved in a folder whose name is the value of <code class="code docutils literal"><span class="pre">statistics_folder</span></code> hyper-parameter.</li>
<li><code class="code docutils literal"><span class="pre">statistics_folder</span></code> (values: string , default value: <code class="code docutils literal"><span class="pre">statistics</span></code>): folder where to save the statistics if <code class="code docutils literal"><span class="pre">saveStatistics</span></code> is set to <code class="code docutils literal"><span class="pre">yes</span></code>.</li>
<li><code class="code docutils literal"><span class="pre">regularized</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code> , default value: <code class="code docutils literal"><span class="pre">no</span></code>): if set to <code class="code docutils literal"><span class="pre">yes</span></code> regularization is enabled.</li>
<li><code class="code docutils literal"><span class="pre">regularizationType</span></code> (values: integer in <code class="code docutils literal"><span class="pre">[0,3]</span></code> , default value: <code class="code docutils literal"><span class="pre">0</span></code>):  <code class="code docutils literal"><span class="pre">0</span></code> to disable regularization, <code class="code docutils literal"><span class="pre">1</span></code>, <code class="code docutils literal"><span class="pre">2</span></code> and <code class="code docutils literal"><span class="pre">3</span></code> for L1, L2 and Bayesian regularization respectively.</li>
<li><code class="code docutils literal"><span class="pre">gamma</span></code> (values: real number, default value: <code class="code docutils literal"><span class="pre">10</span></code>): regularization coefficient for L1 and L2. Is equal to the Dirichlet coefficient <code class="code docutils literal"><span class="pre">a</span></code> for Bayesian regularization.</li>
<li><code class="code docutils literal"><span class="pre">gammaCount</span></code> (values:real number , default value: 0): Dirichlet coefficient <code class="code docutils literal"><span class="pre">b</span></code> for Bayesian regularization and typically 0 for L1 and l2 regularization.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">SLEAHP hyper-parameters</p>
<blockquote>
<div><ul class="simple">
<li><code class="code docutils literal"><span class="pre">megaex_bottom</span></code> (values: integer, default value: 1, valid for SLEAHP): number of mega-examples on which to build the bottom clauses.</li>
<li><code class="code docutils literal"><span class="pre">initial_clauses_per_megaex</span></code> (values: integer, default value: 1, valid for SLEAHP): number of bottom clauses to build for each mega-example (or model or interpretation).</li>
<li><code class="code docutils literal"><span class="pre">d</span></code> (values: integer, default value: 1, valid for SLEAHP): number of saturation steps when building the bottom clause.</li>
<li><code class="code docutils literal"><span class="pre">neg_ex</span></code> (values: <code class="code docutils literal"><span class="pre">given</span></code>, <code class="code docutils literal"><span class="pre">cw</span></code>, default value: <code class="code docutils literal"><span class="pre">cw</span></code>): if set to <code class="code docutils literal"><span class="pre">given</span></code>, the negative examples in training and testing are taken from the test folds interpretations, i.e., those examples <code class="code docutils literal"><span class="pre">ex</span></code> stored as <code class="code docutils literal"><span class="pre">neg(ex)</span></code>; if set to <code class="code docutils literal"><span class="pre">cw</span></code>, the negative examples in training and testing are generated according to the closed world assumption, i.e., all atoms for target predicates that are not positive examples. The set of all atoms is obtained by collecting the set of constants for each type of the arguments of the target predicate, so the target predicates must have at least one fact for <code class="code docutils literal"><span class="pre">modeh/2</span></code> or <code class="code docutils literal"><span class="pre">modeb/2</span></code> also for parameter learning.</li>
<li><code class="code docutils literal"><span class="pre">probability</span></code> (values:real number in <code class="code docutils literal"><span class="pre">[0,1]</span></code> , default value: <code class="code docutils literal"><span class="pre">1.0</span></code>): initial value which indicates the probability to go from the current layer to the next when generating the initial HPLP.</li>
<li><code class="code docutils literal"><span class="pre">rate</span></code> (values: real number in <code class="code docutils literal"><span class="pre">[0,1]</span></code>, default value: <code class="code docutils literal"><span class="pre">0.95</span></code>): at each layer during the tree generation, the probability to go deeper is equal to <code class="code docutils literal"><span class="pre">probability=probability*rate</span></code>. The deeper the layer the lower is the probability to go deeper.</li>
<li><code class="code docutils literal"><span class="pre">min_probability</span></code> (values: real number in <code class="code docutils literal"><span class="pre">[0,1]</span></code>, default value: <code class="code docutils literal"><span class="pre">1e-5</span></code>):  probability threshold under which a clause is dropped out.</li>
<li><code class="code docutils literal"><span class="pre">use_all_mega_examples</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code> , default value:<code class="code docutils literal"><span class="pre">yes</span></code>): if set to <code class="code docutils literal"><span class="pre">yes</span></code> all the the bottom clauses are used to create the tree otherwise only one of them is used (typically the first).</li>
<li><code class="code docutils literal"><span class="pre">saveHPLP</span></code> (values: <code class="code docutils literal"><span class="pre">{no,yes}</span></code>, default value: <code class="code docutils literal"><span class="pre">no</span></code>): if set to <code class="code docutils literal"><span class="pre">yes</span></code> the initial and the learned hierarchical programs are saved in the current folder.</li>
<li><code class="code docutils literal"><span class="pre">saveFile</span></code> (values: string, default value: “hplp”): file name where to save the initial hierarchical programs if <code class="code docutils literal"><span class="pre">saveHPLP</span></code>  is set to <code class="code docutils literal"><span class="pre">yes</span></code>. If the file name is <code class="code docutils literal"><span class="pre">hplp</span></code>, the learned program is saved in file <code class="code docutils literal"><span class="pre">hplp_learned</span></code>.</li>
<li><code class="code docutils literal"><span class="pre">max_layer</span></code> (values: integer, default value: -1): maximum layer of clauses. If set to -1, no maximum is imposed.</li>
<li><code class="code docutils literal"><span class="pre">verbosity</span></code> (values: integer in <code class="code docutils literal"><span class="pre">[1,3]</span></code>, default value: <code class="code docutils literal"><span class="pre">1</span></code>): level of verbosity of the algorithms.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
</div>
<div class="section" id="example-files">
<h2>Example Files<a class="headerlink" href="#example-files" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code docutils literal"><span class="pre">pack/phil/prolog/examples</span></code> folder in SWI-Prolog home contains some example programs.
The subfolder <code class="code docutils literal"><span class="pre">learning</span></code> contains some learning examples.
The <code class="code docutils literal"><span class="pre">pack/phil/docs</span></code> folder contains this manual in latex, html and pdf.</p>
</div>
<div class="section" id="manual-in-pdf">
<h2>Manual in PDF<a class="headerlink" href="#manual-in-pdf" title="Permalink to this headline">¶</a></h2>
<p>A PDF version of the manual is available at <a class="reference external" href="https://arnaudfadja.github.io/phil/_build/latex/phil.pdf">https://arnaudfadja.github.io/phil/_build/latex/phil.pdf</a>.</p>
</div>
<div class="section" id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>phil follows the Artistic License 2.0 that you can find in phil root folder.
The copyright is by Arnaud Nguembang Fadja.</p>
</div>
<div class="section" id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<p id="bibtex-bibliography-index-0"><table class="docutils citation" frame="void" id="raelae95-alt95" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id13">[DRVL95]</a></td><td>L.&nbsp;De&nbsp;Raedt and W.&nbsp;Van&nbsp;Laer. Inductive constraint logic. In <em>Proceedings of the 6th Conference on Algorithmic Learning Theory (ALT 1995)</em>, volume 997 of LNAI, 80–94. Fukuoka, Japan, 1995. Springer.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="kok2005learning" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[KD05]</a></td><td>Stanley Kok and Pedro Domingos. Learning the structure of markov logic networks. In <em>Proceedings of the 22nd international conference on Machine learning</em>, 441–448. 2005.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="fadja2018expectation" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id12">[NFRL18a]</a></td><td>Arnaud Nguembang&nbsp;Fadja, Fabrizio Riguzzi, and Evelina Lamma. Expectation maximization in deep probabilistic logic programming. In <em>International Conference of the Italian Association for Artificial Intelligence</em>, 293–306. Springer, 2018.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="nguriglam18-plp-iw" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id11">[NFRL18b]</a></td><td>Arnaud Nguembang&nbsp;Fadja, Fabrizio Riguzzi, and Evelina Lamma. Learning the parameters of deep probabilistic logic programs. In Elena Bellodi and Tom Schrijvers, editors, <em>Probabilistic Logic Programming (PLP 2018)</em>, volume 2219 of CEUR Workshop Proceedings, 9–14. Aachen, Germany, 2018. Sun SITE Central Europe. URL: <a class="reference external" href="http://ceur-ws.org/Vol-2219/paper2.pdf">http://ceur-ws.org/Vol-2219/paper2.pdf</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="dblp-journals-ai-poole97" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id6">[Poo97]</a></td><td>David Poole. The independent choice logic for modelling multiple agents under uncertainty. <em>Artificial Intelligence</em>, 94(1-2):7–56, 1997.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rig14-cj-ij" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[Rig14]</a></td><td>Fabrizio Riguzzi. Speeding up inference for probabilistic logic programs. <em>CJ_J</em>, 57(3):347–363, 2014. <a class="reference external" href="https://doi.org/10.1093/comjnl/bxt096">doi:10.1093/comjnl/bxt096</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="rigswi10-iclp10-ic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id9">[RS10]</a></td><td>Fabrizio Riguzzi and Terrance Swift. Tabling and Answer Subsumption for Reasoning on Logic Programs with Annotated Disjunctions. In <em>Technical Communications of the International Conference on Logic Programming</em>, volume&nbsp;7 of Leibniz International Proceedings in Informatics (LIPIcs), 162–171. Schloss Dagstuhl–Leibniz-Zentrum fuer Informatik, 2010. <a class="reference external" href="https://doi.org/10.4230/LIPIcs.ICLP.2010.162">doi:10.4230/LIPIcs.ICLP.2010.162</a>.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="dblp-journals-jair-satok01" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id7">[SK01]</a></td><td>Taisuke Sato and Yoshitaka Kameya. Parameter learning of logic programs for symbolic-statistical modeling. <em>J. Artif. Intell. Res.</em>, 15:391–454, 2001.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="venver03-tr" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id3">[VV03]</a></td><td>J.&nbsp;Vennekens and S.&nbsp;Verbaeten. Logic programs with annotated disjunctions. Technical Report CW386, K. U. Leuven, 2003.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="venver04-iclp04-ic" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4">[VVB04]</a></td><td>J.&nbsp;Vennekens, S.&nbsp;Verbaeten, and M.&nbsp;Bruynooghe. Logic programs with annotated disjunctions. In <em>International Conference on Logic Programming</em>, volume 3131 of LNCS, 195–209. Springer, 2004.</td></tr>
</tbody>
</table>
<table class="docutils citation" frame="void" id="ngulamrig17-plp-iw" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[NguembangFadjaLR17]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>, <a class="fn-backref" href="#id10">3</a>)</em> Arnaud Nguembang Fadja, Evelina Lamma, and Fabrizio Riguzzi. Deep probabilistic logic programming. In Christian Theil Have and Riccardo Zese, editors, <em>PLP17_B</em>, volume 1916 of CEUR_S, 3–14. Sun SITE Central Europe, 2017.</td></tr>
</tbody>
</table>
</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">phil on SWISH Manual - SWI-Prolog Version</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#installation">Installation</a><ul>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#example-of-use">Example of use</a></li>
<li><a class="reference internal" href="#testing-the-installation">Testing the installation</a></li>
<li><a class="reference internal" href="#datasets">Datasets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#syntax">Syntax</a></li>
<li><a class="reference internal" href="#semantics">Semantics</a></li>
<li><a class="reference internal" href="#inference">Inference</a></li>
<li><a class="reference internal" href="#learning">Learning</a><ul>
<li><a class="reference internal" href="#input">Input</a><ul>
<li><a class="reference internal" href="#preamble">Preamble</a></li>
<li><a class="reference internal" href="#background-and-initial-hierarchical-program">Background and Initial hierarchical program</a></li>
<li><a class="reference internal" href="#language-bias">Language Bias</a></li>
<li><a class="reference internal" href="#example-interpretations">Example Interpretations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#commands">Commands</a><ul>
<li><a class="reference internal" href="#parameter-learning">Parameter Learning</a></li>
<li><a class="reference internal" href="#structure-learning">Structure Learning</a></li>
<li><a class="reference internal" href="#testing">Testing</a></li>
</ul>
</li>
<li><a class="reference internal" href="#hyper-parameters-for-learning">Hyper-parameters for Learning</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-files">Example Files</a></li>
<li><a class="reference internal" href="#manual-in-pdf">Manual in PDF</a></li>
<li><a class="reference internal" href="#license">License</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">phil 1.0.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Arnaud Nguembang Fadja, Riguzzi Fabrizio.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
    </div>
  </body>
</html>